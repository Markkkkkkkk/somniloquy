---
category: [åšå®¢å»ºç«™]
tag: [æœåŠ¡å™¨è®¾ç½®,SSHå¯†é’¥ç™»é™†,Fail2ban,ç½‘ç«™å®‰å…¨,wordfence,WPS Hide Login,CloudFlare]
postType: post
status: publish
---

## å‰è¨€

Aå®‰å…¨é‡ä¸­ä¹‹é‡ï¼Œå°ä¼™ä¼´ä»¬ä¹Ÿä¸å¸Œæœ›åƒç€ç«é”…å”±ç€æ­Œï¼Œå®¶è¢«å·äº†å§ã€‚ç”šè‡³è¢«ä¸æ³•åˆ†å­æ•²è¯ˆå‹’ç´¢æ”¯ä»˜æ¯”ç‰¹å¸æ‰èƒ½è§£å¯†ç½‘ç«™æ•°æ®ã€‚è¿™é‡Œå°±å‘å¤§å®¶ä»‹ç»wordpressåšå®¢ç½‘ç«™ä½¿ç”¨è¿‡ç¨‹ä¸­çš„ä¸€äº›å®‰å…¨é˜²æŠ¤æªæ–½ã€‚

## æœåŠ¡å™¨å¯†é’¥ç™»é™†

æœåŠ¡å™¨è¿™é‡Œä»¥Ubuntuä¸ºä¾‹ï¼Œcentosæˆ–å…¶ä»–ç‰ˆæœ¬çš„LinuxæœåŠ¡å™¨è¯·è‡ªè¡ŒGPTå“ˆã€‚

é¦–å…ˆåœ¨ä½ çš„æœ¬åœ°windowæœºå™¨ ä¸Šï¼Œè¿›å…¥cmdå‘½ä»¤è¡Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ç”Ÿæˆ SSH å¯†é’¥å¯¹ï¼š

```shell
ssh-keygen -t rsa -b 4096 -C "your_email@example.com"
```

è¿™å°†ä¼šç”Ÿæˆä¸€ä¸ª RSA ç±»å‹çš„å¯†é’¥å¯¹ï¼Œé•¿åº¦ä¸º 4096 ä½ã€‚ä½ å¯ä»¥æŒ‰æç¤ºé€‰æ‹©ä¿å­˜å¯†é’¥çš„ä½ç½®å’Œè®¾ç½®å¯†ç ã€‚é»˜è®¤ä½ç½®åœ¨`C:\Users\ä½ çš„windowè´¦æˆ·å\.ssh\id_rsa.pub`ç„¶åå°†ç”Ÿæˆçš„å¯†é’¥æ–‡ä»¶å†…å®¹ç²˜è´´åˆ°æœåŠ¡å™¨`~/.ssh/authorized_keys`è¿™ä¸ªç›®å½•ä¸‹ã€‚ç„¶åä¿®æ”¹æ–‡ä»¶æƒé™ï¼š

```shell
chmod 700 ~/.ssh  
chmod 600 ~/.ssh/authorized_keys
```

æ¥ä¸‹æ¥é…ç½®SSH åªå…è®¸å¯†é’¥ç™»å½•ï¼Œç™»å½•åˆ°ä½ çš„ Ubuntu æœåŠ¡å™¨ï¼Œç¼–è¾‘ SSH é…ç½®æ–‡ä»¶ï¼š

```shell
sudo nano /etc/ssh/sshd_config
```

æ‰¾åˆ°å¹¶ä¿®æ”¹ä»¥ä¸‹å‡ è¡Œï¼ˆå¦‚æœæ²¡æœ‰è¿™äº›è¡Œï¼Œæ‰‹åŠ¨æ·»åŠ ï¼‰ï¼š

```shell
PasswordAuthentication no
ChallengeResponseAuthentication no
UsePAM no
```

- PasswordAuthentication noï¼šç¦ç”¨å¯†ç è®¤è¯

- ChallengeResponseAuthentication noï¼šç¦ç”¨æŒ‘æˆ˜-å“åº”è®¤è¯

- UsePAM noï¼šç¦ç”¨åŸºäº PAM çš„è®¤è¯

ä¿®æ”¹é…ç½®åï¼Œé‡å¯ SSH æœåŠ¡ä½¿æ›´æ”¹ç”Ÿæ•ˆï¼š

```
sudo systemctl restart ssh
```

åœ¨æœ¬åœ°windowç”µè„‘ä¸Šä½ å¯ä»¥å°è¯•ç”¨SSHå·¥å…·å¯†ç ç™»å½•æœåŠ¡å™¨ï¼Œæç¤ºæ˜¯è¢«æ‹’ç»çš„ï¼Œç™»å½•æ–¹å¼é€‰æ‹©å¯†é’¥ç™»å½•åˆ™æ˜¯å¯ä»¥çš„ï¼Œå¯†é’¥æ–‡ä»¶åœ¨ä½ æœ¬åœ°ç”µè„‘çš„`C:\Users\ä½ çš„windowè´¦æˆ·å\.ssh\id_rsa`æ–‡ä»¶å†…ï¼Œè¿™æ ·å¾ˆå¤§ç¨‹åº¦ä¸Šèƒ½é˜²æ­¢åˆ«äººå¯†ç çˆ†ç ´ã€‚

## Fail2banè®¾ç½®

Fail2Ban æ˜¯ä¸€ç§ç”¨äº Linux ç³»ç»Ÿçš„å®‰å…¨å·¥å…·ï¼Œå®ƒé€šè¿‡ç›‘æ§ç³»ç»Ÿæ—¥å¿—æ–‡ä»¶æ¥é˜²æ­¢æš´åŠ›ç ´è§£æ”»å‡»ï¼Œå¹¶æ ¹æ®ç‰¹å®šçš„è§„åˆ™å°ç¦å¯ç–‘çš„ IP åœ°å€ã€‚è¿™é‡Œè¿˜æ˜¯ä»¥Ubuntuä¸ºä¾‹ï¼Œé¦–å…ˆå®‰è£…Faile2banã€‚

```shell
sudo apt update
sudo apt install fail2ban -y
```

å¯åŠ¨å¹¶è®¾ç½®å¼€æœºè‡ªå¯

```shell
sudo systemctl enable fail2ban
sudo systemctl start fail2ban
```

æŸ¥çœ‹çŠ¶æ€ï¼š

```
sudo systemctl status fail2ban
```

å¦‚æœæ˜¾ç¤ºä¸ºactiveåˆ™Fail2banå°±å®‰è£…å¥½äº†ï¼Œå®‰è£…ä¸å¤æ‚ï¼Œæ¥ä¸‹æ¥ä¸»è¦æ˜¯é…ç½®ä¸€äº›è§„åˆ™

### é˜²æ­¢wordpressç™»å½•æš´åŠ›ç ´è§£è§„åˆ™

æ‰“å¼€`/etc/fail2ban/jail.conf`ç›®å½•ä¸‹çš„è¿™ä¸ªæ–‡ä»¶ï¼Œåœ¨ç©ºç™½å¤„æ·»åŠ ï¼š

```
[wordpress-auth]
enabled = true
filter = wordpress-auth
port = http,https
# nginxæ—¥å¿—ä½ç½®ï¼Œæ ¹æ®è‡ªå·±å®é™…ç›®å½•ä¿®æ”¹ã€‚
logpath = /usr/apps/blog/nginx/logs/access.log
# å¤±è´¥æ¬¡æ•°
maxretry = 5
# åœ¨å¤šé•¿æ—¶é—´å†…å¤±è´¥
findtime = 600
# åœ¨600ç§’ä¹‹å†…å¤±è´¥è¶…è¿‡äº”æ¬¡åˆ™å°ç¦åå°æ—¶ã€‚
bantime = 36000
```

å…¶æ¬¡åœ¨`/etc/fail2ban/filter.d`åœ¨è¿™ä¸ªæ–‡ä»¶å¤¹ä¸‹è¾¹æ–°å»ºæ–‡ä»¶`wordpress-auth.conf`ï¼Œå†…å®¹ä¸ºï¼š

```
[Definition]
failregex = ^<HOST> .* "POST /wp-login.php HTTP.*" 200
            ^<HOST> .* "POST /wp-login.php HTTP.*" 403
            # ä¸‹è¾¹ä¸¤ä¸ªå› ä¸ºwordpressä½¿ç”¨äº†WPSéšè—ç™»å½•æ’ä»¶ä¿®æ”¹äº†ç™»å½•æ¥å£ï¼Œæ‰€ä»¥ä¿®æ”¹åçš„åœ°å€ä¹Ÿæ·»åŠ è¿›å»ã€‚
            ^<HOST> .* "POST /iloveyou HTTP.*" 200
            ^<HOST> .* "POST /iloveyou HTTP.*" 403
ignoreregex =

```

ä»–çš„åŸç†å…¶å®å°±æ˜¯æ ¹æ®nginxè®¿é—®æ—¥å¿—ï¼Œç»Ÿè®¡IPç‰¹å®šURLå¤±è´¥çš„æ¬¡æ•°ï¼Œç„¶åæŠŠç¬¦åˆæ¡ä»¶çš„IPæ·»åŠ åˆ°å°ç¦åˆ—è¡¨ã€‚è¿™æ ·å°±èƒ½é˜²æ­¢åˆ«äººæš´åŠ›ç ´è§£ç™»å½•åå°äº†ã€‚

### é˜²æ­¢XML-RPC æœåŠ¡æš´åŠ›ç ´è§£è§„åˆ™

XML-RPC æ˜¯ä¸€ç§ç”¨äºè¿œç¨‹é€šä¿¡çš„åè®®ï¼Œåœ¨ WordPress ä¸­ç”¨äºå¤–éƒ¨åº”ç”¨ç¨‹åºè¿›è¡Œè®¿é—®å’Œç®¡ç†ã€‚ç®€å•æ¥è¯´å°±æ˜¯ç”¨APIæ¥å£ç›´æ¥æ“ä½œwordpresså†…å®¹ï¼Œæ¯”æ–¹è¯´å‘å¸ƒå¢åˆ æ”¹æŸ¥æ–‡ç« ç­‰ã€‚

æ‰“å¼€`/etc/fail2ban/jail.conf`ç›®å½•ä¸‹çš„è¿™ä¸ªæ–‡ä»¶ï¼Œåœ¨ç©ºç™½å¤„æ·»åŠ ï¼š

```
[wordpress-xmlrpc]
enabled = true
filter = wordpress-xmlrpc
port = http,https
logpath = /usr/apps/blog/nginx/logs/access.log
maxretry = 5
findtime = 600
bantime = 36000
```

å…¶æ¬¡åœ¨`/etc/fail2ban/filter.d`åœ¨è¿™ä¸ªæ–‡ä»¶å¤¹ä¸‹è¾¹æ–°å»ºæ–‡ä»¶`wordpress-xmlrpc.conf`ï¼Œå†…å®¹ä¸ºï¼š

```
[Definition]
failregex = ^<HOST> .*POST /xmlrpc.php HTTP.*$
ignoreregex =
```

### é˜²æ­¢æœåŠ¡å™¨SSHæš´åŠ›ç ´è§£ç™»å½•è§„åˆ™

åœ¨`/etc/fail2ban/jail.conf`åœ¨è¿™ä¸ªé…ç½®æ–‡ä»¶é‡Œæ‰¾åˆ°`[ssh]`è¿™ä¸ªé…ç½®ï¼Œåˆå§‹å®‰è£…çš„è¿™ä¸ªé…ç½®æ˜¯è‡ªå¸¦æœ‰çš„ä½†æ˜¯è¿˜è¦åŠ ä¸€ç‚¹ä¸œè¥¿ã€‚å¤§å®¶å¯ä»¥æ ¹æ®å·²æœ‰çš„è·Ÿä¸‹è¾¹çš„å¯¹ç…§ä¸€ä¸‹ã€‚è¿™ä¸ªè§„åˆ™æ˜¯é˜²æ­¢æœåŠ¡å™¨è¢«åˆ«äººSSHæš´åŠ›ç ´è§£çš„è§„åˆ™ã€‚

```
[sshd]
enabled=true
port    = ssh
filter  = sshd
logpath = %(sshd_log)s
backend = %(sshd_backend)s
# æ·»åŠ çš„å†…å®¹
maxretry=5
findtime = 600
bantime=18000
action = %(action_)s
         log-ban-history
```

### é˜²å¾¡æ‰«æå‹æ”»å‡»è§„åˆ™

è¿™ç§è§„åˆ™ç”¨æ¥é˜²å¾¡â€œæ‰«æå‹æ”»å‡»â€ã€‚æ”»å‡»è€…ä¼šä¸åœåœ°è®¿é—®ä½ ç«™ç‚¹ä¸Šå¹¶ä¸å­˜åœ¨çš„è·¯å¾„ï¼ˆæ¯”å¦‚ `/phpmyadmin/ã€/wp-admin/install.phpã€/xxx.php`ï¼‰ï¼Œé€šè¿‡ä¸æ–­è¯•æ¢ 404 é”™è¯¯é¡µé¢æ¥å¯»æ‰¾æ¼æ´æˆ–æ•æ„Ÿæ–‡ä»¶ã€‚Fail2Ban å°±ä¼šæ£€æµ‹åˆ°æŸä¸ª IP åœ¨çŸ­æ—¶é—´å†…åˆ¶é€ å¤§é‡ 404ï¼Œåˆ¤æ–­å®ƒæ˜¯æ¶æ„æ‰«æï¼Œä»è€Œä¸´æ—¶å°ç¦å®ƒã€‚

æ‰“å¼€`/etc/fail2ban/jail.conf`ç›®å½•ä¸‹çš„è¿™ä¸ªæ–‡ä»¶ï¼Œåœ¨ç©ºç™½å¤„æ·»åŠ ï¼š

```
[nginx-404]
enabled = true
port = http,https
filter = nginx-404
logpath = /usr/apps/blog/nginx/logs/access.log
maxretry = 10
findtime = 600
bantime = 3600
```

å…¶æ¬¡åœ¨`/etc/fail2ban/filter.d`åœ¨è¿™ä¸ªæ–‡ä»¶å¤¹ä¸‹è¾¹æ–°å»ºæ–‡ä»¶`nginx-404.conf`ï¼Œå†…å®¹ä¸ºï¼š

```
[Definition]
failregex = ^<HOST> -.*"(GET|POST).*(HTTP).*" 404
ignoreregex =
```

å¤§å®¶é…ç½®å¥½ä¹‹ååˆ«å¿˜äº†æœ€åå†é‡å¯ä¸‹Fail2banï¼Œè®©è§„åˆ™ç”Ÿæ•ˆã€‚ä¹Ÿå¯ä»¥æŸ¥çœ‹è‡ªå·±å“ªäº›è§„åˆ™ç”Ÿæ•ˆå’Œè¿‡ä¸€æ®µæ—¶é—´ä¹‹åæŸ¥çœ‹å°ç¦äº†å“ªäº›IPã€‚

```
# é‡å¯å‘½ä»¤
sudo systemctl restart fail2ban
# æŸ¥çœ‹è¿è¡ŒçŠ¶æ€
sudo systemctl status fail2ban
# æŸ¥çœ‹æœ‰å“ªäº›è§„åˆ™ç”Ÿæ•ˆ
sudo fail2ban-client status
# æŸ¥çœ‹å…·ä½“æŸä¸ªè§„åˆ™çš„çŠ¶æ€å’Œå¯¹åº”å°ç¦çš„IP
sudo fail2ban-client status nginx-404
# è§£å°æŸä¸ªIP
sudo fail2ban-client set nginx-404 unbanip 192.168.1.100
```

## Wordfence Security

Wordfence æ˜¯ä¸€ä¸ªå¾ˆå—æ¬¢è¿çš„ WordPress å®‰å…¨æ’ä»¶ï¼Œä»–èƒ½ä¿æŠ¤ä½ çš„ WordPress ç½‘ç«™å…å—å„ç§å®‰å…¨å¨èƒï¼ŒåŒ…æ‹¬ æ¶æ„æ”»å‡»ã€æš´åŠ›ç ´è§£ã€ç—…æ¯’ã€æœ¨é©¬ã€SQL æ³¨å…¥ç­‰å¸¸è§æ”»å‡»ã€‚

å®ƒæä¾›äº† é˜²ç«å¢™ä¿æŠ¤ã€æ¶æ„è½¯ä»¶æ‰«æã€ç™»å½•å®‰å…¨ã€å®æ—¶æµé‡ç›‘æ§ç­‰å¤šç§åŠŸèƒ½ï¼Œç¡®ä¿ç½‘ç«™åœ¨é¢å¯¹ç½‘ç»œæ”»å‡»æ—¶èƒ½å¤ŸåŠæ—¶é˜»æ­¢ã€‚å…¶ç‰¹ç‚¹åŒ…æ‹¬å®æ—¶ IP å°ç¦ã€æ”»å‡»é˜²å¾¡ã€æ—¥å¿—è®°å½•ç­‰ã€‚

### å®‰è£…

åœ¨wordpressæ’ä»¶å®‰è£…é¡µé¢ç›´æ¥æœç´¢å®‰è£…å¯ç”¨å°±å¯ä»¥äº†ï¼Œè®°å¾—å¯ç”¨è‡ªåŠ¨æ›´æ–°ï¼Œå› ä¸ºæ˜¯å®‰å…¨ç±»è½¯ä»¶ï¼Œæœ€å¥½æ˜¯åŠæ—¶æ›´æ–°æ¯”è¾ƒå¥½ã€‚

![image-20220429094431972](https://image.hyly.net/i/2025/08/18/20be19d56de7a932c78d14794869880d-0.webp)

åˆå§‹åŒ–æ—¶ä¼šè¦æ±‚è¾“å…¥ä¸€ä¸ªé‚®ç®±ï¼Œå¹³æ—¶ç”¨æ¥å‘é€å®‰å…¨ç›¸å…³ä¿¡æ¯ã€‚å¡«ä¸€ä¸ªå¸¸ç”¨é‚®ç®±å³å¯ã€‚

![image-20220429094910185](https://image.hyly.net/i/2025/08/18/090785e175e9b5d402a80e3072c66242-0.webp)

ä¸€èˆ¬æ’ä»¶éƒ½ä¼šé—®ä½ è¦ä¸è¦è´­ä¹°é«˜çº§ç‰ˆã€‚æˆ‘ä»¬ç›´æ¥è°¢è°¢å³å¯ã€‚å…è´¹ç‰ˆå·²ç»å¤Ÿç”¨ï¼Œå¦‚æœä¸å¤Ÿç”¨äº†å†ä¹°ä¹Ÿä¸è¿Ÿã€‚

![image-20220429095039236](https://image.hyly.net/i/2025/08/18/39c371216be24d28d529225386120964-0.webp)

ä¸€èˆ¬æ˜¯é€šè¿‡å·¦ä¾§èœå•æ è¿›å…¥è®¾ç½®wordfenceçš„ï¼š

![image-20220429095254328](https://image.hyly.net/i/2025/08/18/e1fd542c796e6f48ee9f4d246a113365-0.webp)

### å…¨å±€é€‰é¡¹

å…¨å±€é€‰é¡¹å¤§å®¶å¯ä»¥å‚è€ƒæˆ‘çš„é…ç½®ï¼Œå¯ä»¥ä»è¿™é‡Œè¿›å…¥ï¼š

![image-20220429095752599](https://image.hyly.net/i/2025/08/18/dcc19c1240c59d50e2af709f63ad40fb-0.webp)

è¯¦ç»†çš„é…ç½®å¦‚ä¸‹ï¼š

![image-20250818185106784](https://image.hyly.net/i/2025/08/18/38e65ee78e36fce9c870efacd7ac13a7-0.webp)

1. **è®¸å¯è¯ï¼š**å°±ç®—æ˜¯å…è´¹ç‰ˆï¼Œä¹Ÿæ˜¯è¦æ³¨å†Œä¸€ä¸ªè´¦å·è·å–è®¸å¯è¯çš„ï¼Œç„¶åæŠŠè®¸å¯è¯å¯†é’¥å¡«å…¥åˆ°å¯¹åº”æ¡†å°±å¯ä»¥äº†ã€‚
2. **å½“æœ‰ç®¡ç†å‘˜æƒé™çš„äººç™»å½•æ—¶æé†’æˆ‘ï¼š**è¿™ä¸ªå…³æ‰å°±å¯ä»¥äº†ï¼Œè¦ä¸ç„¶æ¯æ¬¡ç™»å½•çš„æ—¶å€™éƒ½ä¼šå‘é€ä¸€å°é‚®ä»¶ï¼ŒæŒºçƒ¦äººçš„ï¼Œåªéœ€è¦å¼€å¯**ä»…åœ¨ç®¡ç†å‘˜ä»æ–°è®¾å¤‡æˆ–ä½ç½®ç™»å½•æ—¶æé†’æˆ‘**å°±å¯ä»¥äº†ã€‚

### é˜²ç«å¢™è®¾ç½®

å…¥å£ä»è¿™é‡Œè¿›å…¥ã€‚

![image-20250818190005387](https://image.hyly.net/i/2025/08/18/1e2b17229990a1571397052e9866a8d2-0.webp)

è¿™æ˜¯æˆ‘æ‰€æœ‰çš„é…ç½®ï¼Œå¤§å®¶å¯ä»¥å‚ç…§é…ç½®ã€‚

1. **å¼ºåŠ›ä¿æŠ¤ï¼š**è¿™é‡Œä¹Ÿé’ˆå¯¹ç½‘ç«™ç™»å½•åšäº†ä¸€å®šé˜²æŠ¤ï¼Œå¯ä»¥ä¸Fail2banç»“åˆå¢å¼ºé˜²æŠ¤ï¼Œè™½ç„¶æœ‰äº›æœ‰é‡å¤çš„åœ°æ–¹ã€‚
2. **é™é€Ÿï¼š**é™é€Ÿè¿™é‡Œåˆ™å¯¹äººç±»å’Œçˆ¬è™«é¢‘ç¹è®¿é—®è¡Œä¸ºåšäº†ä¸€å®šé™åˆ¶ã€‚

![image-20250818190404160](https://image.hyly.net/i/2025/08/18/538930e947d8e834fc9e8c1241ed22e3-0.webp)

#### æ‹¦æˆª

å…¶ä¸­åœ¨é˜²ç«å¢™è®¾ç½®é‡Œèƒ½æŸ¥çœ‹è¢«é˜»æ­¢çš„IPéƒ½æœ‰å“ªäº›ï¼Œå¯ä»¥æ ¹æ®é˜»æ­¢æ¬¡æ•°è¾ƒå¤šçš„IPæ‰‹åŠ¨è®¾ç½®æ‹¦æˆªï¼Œè¿™æ ·å°±èƒ½æ°¸ä¹…æ‹¦æˆªï¼Œä¸ä¼šèµ°é»˜è®¤çš„è§„åˆ™ï¼Œé»˜è®¤çš„è§„åˆ™æ˜¯ä¸€å®šæ—¶é—´å†…è¾¾åˆ°ä¸€å®šè®¿é—®æ¬¡æ•°æ‰ä¼šé˜»æ­¢ä¸€æ¬¡ï¼Œç®—ä¸€æ¬¡ã€‚

![image-20250818193716247](https://image.hyly.net/i/2025/08/18/419847ba94dbf94fb6be6e11922ac5fb-0.webp)

å¯ä»¥åœ¨æ‹¦æˆªè¿™é‡Œé€‰æ‹©IPåœ°å€è¿›è¡Œæ‰‹åŠ¨æ‹¦æˆªã€‚

![image-20250818193821760](https://image.hyly.net/i/2025/08/18/abd05f358157674b779d2b2dc89a1f39-0.webp)

### æ‰«æ

å¤§å®¶å¯ä»¥åœ¨è¿™é‡Œè¿›å…¥æ‰«æï¼Œæœ€åˆå®‰è£…çš„æ—¶å€™å¯ä»¥è¿›è¡Œä¸€æ¬¡æ‰«æï¼Œå‘ç°wordpressç½‘ç«™çš„é—®é¢˜ï¼Œç„¶åæ ¹æ®ä¸‹è¾¹çš„æ‰«æç»“æœè¿›è¡Œç›¸åº”çš„ä¿®å¤ï¼Œå› ä¸ºé—®é¢˜å¯èƒ½å¤šç§å¤šæ ·ï¼Œè¿™é‡Œå°±ä¸ä¸€ä¸€åˆ—ä¸¾äº†ï¼Œä¸çŸ¥é“å¦‚ä½•ä¿®å¤æˆ–è€…è¦ä¸è¦ä¿®å¤çš„å°ä¼™ä¼´å¯ä»¥è‡ªè¡ŒGPTè§£å†³ã€‚

![image-20250818191037308](https://image.hyly.net/i/2025/08/18/f9fe73d7dd2ba84bb6842c1c57532c8c-0.webp)

### ç™»å½•å®‰å…¨æ€§

å¤§å®¶å¯ä»¥åœ¨ç™»å½•å®‰å…¨æ€§è¿™é‡Œè®¾ç½®åŒé‡èº«ä»½éªŒè¯ï¼Œè¿™æ ·å¤§å¤§å¢å¼ºç”¨æˆ·ç™»å½•çš„å®‰å…¨æ€§ï¼Œé˜²æ­¢åˆ«äººç™»å½•åå°æš´åŠ›ç ´è§£ï¼Œä½†æ˜¯æˆ‘å«Œéº»çƒ¦å°±å…ˆæ²¡è®¾ç½®ï¼Œä½†æ˜¯ç™»å½•å®‰å…¨æ€§->è®¾ç½®è¿™é‡Œæœ‰ä¸ªreCAPTCHAæˆ‘è§‰å¾—è¿˜æ˜¯æŒºå¥½çš„ï¼Œä»–çš„åŸç†å°±æ˜¯è°ƒç”¨è°·æ­ŒéªŒè¯ç ï¼Œå°±æ˜¯é‚£ç§éœ€è¦ç‚¹å‡»æˆ‘ä¸æ˜¯æœºå™¨äººçš„é‚£ç§éªŒè¯ç ï¼Œå¯¹ç”¨æˆ·å‹å¥½ä¸€ç‚¹ã€‚è¯¦ç»†çš„reCAPTCHAå¯†é’¥è·å–æ–¹æ³•åœ¨ä¸‹è¾¹çš„æ³¨æ„é“¾æ¥é‡Œï¼Œç‚¹è¿›å»ç™»å½•è°·æ­Œè´¦å·ä¸€æ­¥æ­¥è·å–å°±å¯ä»¥äº†ï¼Œç„¶åæŠŠå¯†é’¥å’ŒSecretå¡«åˆ°ä¸¤ä¸ªå¯¹è¯æ¡†é‡Œå°±å¯ä»¥ã€‚

![image-20250818194715731](https://image.hyly.net/i/2025/08/18/75bcd01912cfdc03752f04483a9781e0-0.webp)

è®¾ç½®å¥½ä¹‹åç™»é™†é¡µé¢å°±ä¼šå‡ºç°è¿™ä¸ªå›¾æ ‡ï¼Œå¦‚æœreCAPTCHAè§‰å¾—é¡µé¢è®¿é—®çš„äººæ˜¯äººç±»å°±ä¸ä¼šæœ‰éªŒè¯ç ï¼Œå¦‚æœæ˜¯æœºå™¨äººæˆ–è§‰å¾—è®¿é—®è€…ä¸å®‰å…¨å°±ä¼šå‡ºéªŒè¯ç æˆ–ç›´æ¥å‘é€é‚®ä»¶ï¼Œé‚®ä»¶é‡Œæœ‰ä¸€ä¸ªç™»é™†é“¾æ¥å¤åˆ¶åˆ°æµè§ˆå™¨å†æ¬¡ç™»å½•æ‰è¡Œï¼Œå¯ä»¥è¯´æ˜¯ç›¸å½“å®‰å…¨çš„äº†ã€‚reCAPTCHAè¿™é‡Œè¿˜å¯ä»¥è®¾ç½®é˜ˆå€¼åˆ†æ•°ï¼Œä¸€èˆ¬0.5å°±å¯ä»¥äº†ã€‚

![image-20250818200208812](https://image.hyly.net/i/2025/08/18/540fd5327907b25d9c26321d16ea57ad-0.webp) 

è‡³æ­¤ï¼ŒWordfence Securityå°±é…ç½®å®Œæˆå•¦~ å¦‚æœé‡åˆ°ç´§æ€¥é—®é¢˜çš„è¯ä»–ä¼šè‡ªåŠ¨å‘é‚®ä»¶æé†’çš„ï¼Œå¤§å®¶åœ¨å¹³æ—¶ä¹Ÿå¯ä»¥ç™»å½•åšå®¢åå°æŸ¥çœ‹æ—¥å¿—çœ‹æœ‰ä»€ä¹ˆé—®é¢˜æ²¡ã€‚

**TIPSï¼š**reCAPTCHAåªé’ˆå¯¹æ˜¯å›½å¤–æœåŠ¡å™¨çš„å°ä¼™ä¼´ï¼Œå¦‚æœæœåŠ¡å™¨æ˜¯å›½å†…çš„ï¼Œè®¾ç½®reCAPTCHAä¹‹ååœ¨ç™»å½•é¡µé¢ä¼šè°ƒè°·æ­Œæ¥å£ï¼Œåœ¨å›½å†…æœåŠ¡å™¨æ˜¯è®¿é—®ä¸é€šçš„ã€‚å›½å†…æœåŠ¡å™¨çš„å°ä¼™ä¼´å¯ä»¥ä½¿ç”¨`Captcha by BestWebSoft`æ’ä»¶ï¼Œåœ¨wordpressæ’ä»¶å¸‚åœºç›´æ¥æœç´¢å®‰è£…å°±å¯ä»¥ï¼Œä½¿ç”¨æ–¹å¼ä¹Ÿéå¸¸ç®€å•ï¼Œè¿›å»ç‚¹ç‚¹çœ‹å°±çŸ¥é“æ€ä¹ˆè®¾ç½®äº†ï¼Œè¿™é‡Œå°±ä¸å†å‡ºè¯¦ç»†æ•™ç¨‹äº†ã€‚

## WPS Hide Login

WPS Hide Login æ˜¯ WordPress çš„ä¸€ä¸ª å®‰å…¨ç±»æ’ä»¶ï¼Œå®ƒçš„ä½œç”¨å¾ˆç®€å•ï¼šä¿®æ”¹ WordPress é»˜è®¤çš„åå°ç™»å½•åœ°å€ï¼ˆ/wp-login.php å’Œ /wp-admin/ï¼‰

### ä¸ºä»€ä¹ˆè¦ä½¿ç”¨è¿™ä¸ªæ’ä»¶

**é»˜è®¤ç™»å½•åœ°å€æš´éœ²é£é™©å¤§**
 WordPress é»˜è®¤çš„åå°ç™»å½•åœ°å€æ˜¯ï¼š

- `https://example.com/wp-login.php`
- `https://example.com/wp-admin/`
   å‡ ä¹æ‰€æœ‰é»‘å®¢ã€çˆ¬è™«ã€çˆ†ç ´å·¥å…·éƒ½çŸ¥é“è¿™ä¸€ç‚¹ï¼Œæ‰€ä»¥ä¼šä¸æ–­å¯¹è¿™ä¸¤ä¸ªåœ°å€è¿›è¡Œæš´åŠ›ç ´è§£å°è¯•ã€‚

**æ’ä»¶çš„ä½œç”¨**
 `WPS Hide Login` å¯ä»¥æŠŠç™»å½•åœ°å€æ”¹æˆä¸€ä¸ªä½ è‡ªå®šä¹‰çš„è·¯å¾„ï¼Œæ¯”å¦‚ï¼š

- `https://example.com/my-secret-login`
   è¿™æ ·æ”»å‡»è€…è®¿é—® `/wp-login.php` æˆ– `/wp-admin/` æ—¶ï¼Œå°±ä¼šç›´æ¥è¿”å› **404 é¡µé¢**ï¼Œè€Œä¸ä¼šæš´éœ²åå°å…¥å£ã€‚

### ä½¿ç”¨

ä½¿ç”¨ä¹Ÿæ˜¯éå¸¸ç®€å•ï¼Œç›´æ¥æ’ä»¶å¸‚åœºæœç´¢å®‰è£…å¯ç”¨ï¼Œå…¥å£åœ¨è®¾ç½®é‡Œé¢ï¼š

![](https://image.hyly.net/i/2025/08/21/6dfdf329578e7ff390faafc71122a24a-0.webp)

ç„¶åä¿®æ”¹è‡ªå·±çš„ç™»å½•å…¥å£é“¾æ¥ä¿å­˜å°±å¯ä»¥äº†~

![image-20250821091931768](https://image.hyly.net/i/2025/08/21/8eb34c19dcc57f699a2edfda4b0692fd-0.webp)

## CloudFlare

Cloudflareæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ª **å…¨çƒ CDN + ç½‘ç»œå®‰å…¨ + è¾¹ç¼˜è®¡ç®—å¹³å°**ã€‚å®ƒä½äºä½ çš„ç½‘ç«™/åº”ç”¨å’Œè®¿é—®ç”¨æˆ·ä¹‹é—´ï¼Œæ‰®æ¼”ä¸€ä¸ª **åå‘ä»£ç†** çš„è§’è‰²ã€‚

å¯ä»¥ç†è§£ä¸ºï¼š
 ğŸ‘‰ ç”¨æˆ·è®¿é—®ä½ çš„ç½‘ç«™æ—¶ï¼Œæµé‡å…ˆç»è¿‡ Cloudflareï¼Œå†ç”± Cloudflare è½¬å‘åˆ°ä½ çœŸå®çš„æœåŠ¡å™¨ã€‚
 è¿™æ ·å¯ä»¥å¸¦æ¥ **åŠ é€Ÿ** + **ä¿æŠ¤** çš„æ•ˆæœã€‚

### Cloudflare çš„æ ¸å¿ƒåŠŸèƒ½

1. **CDN åŠ é€Ÿï¼ˆå†…å®¹åˆ†å‘ç½‘ç»œï¼‰**
	1. Cloudflare åœ¨å…¨çƒæœ‰ 300+ ä¸ªèŠ‚ç‚¹ï¼ˆæ•°æ®ä¸­å¿ƒï¼‰ï¼Œå®ƒä¼šç¼“å­˜ä½ ç½‘ç«™çš„é™æ€èµ„æºï¼ˆå›¾ç‰‡ã€JSã€CSS ç­‰ï¼‰ã€‚
	2. ç”¨æˆ·è®¿é—®æ—¶ï¼Œå°±è¿‘ä»æœ€è¿‘çš„ Cloudflare èŠ‚ç‚¹è·å–èµ„æº â†’ åŠ è½½æ›´å¿«ï¼Œé™ä½å»¶è¿Ÿã€‚
2. **ç½‘ç«™é˜²æŠ¤ï¼ˆå®‰å…¨é˜²å¾¡ï¼‰**
	1. **DDoS é˜²æŠ¤**ï¼šæ‹¦æˆªæµ·é‡æ¶æ„æµé‡ï¼Œä¿æŠ¤æœåŠ¡å™¨ä¸è¢«æ‰“æ­»ã€‚**
	2. **WAFï¼ˆWeb åº”ç”¨é˜²ç«å¢™ï¼‰**ï¼šé˜»æ­¢ SQL æ³¨å…¥ã€XSS ç­‰å¸¸è§æ”»å‡»ã€‚**
	3. **Bot ç®¡ç†**ï¼šè¯†åˆ«å¹¶é˜»æŒ¡æ¶æ„çˆ¬è™«ã€çˆ†ç ´å·¥å…·ã€‚
	4. **éšè—çœŸå® IP**ï¼šæ”»å‡»è€…åªèƒ½çœ‹åˆ° Cloudflare çš„ IPï¼Œçœ‹ä¸åˆ°ä½ çš„æºç«™ IPã€‚
3. **æ™ºèƒ½è·¯ç”±ä¸ä¼˜åŒ–**
	1. Cloudflare ä¼šè‡ªåŠ¨é€‰æ‹©æœ€å¿«çš„ç½‘ç»œè·¯å¾„ï¼ŒæŠŠæµé‡ä»ç”¨æˆ·ä¼ åˆ°æºç«™ã€‚
	2. æ”¯æŒ **å‹ç¼©ã€è‡ªåŠ¨ä¼˜åŒ–å›¾ç‰‡ã€HTTP/2/3ã€ç¼“å­˜ç­–ç•¥**ï¼Œæå‡æ€§èƒ½ã€‚
4. **è¾¹ç¼˜è®¡ç®—ï¼ˆWorkersã€Pagesã€KV ç­‰ï¼‰**
	1. æä¾› **Cloudflare Workers**ï¼šåœ¨è¾¹ç¼˜èŠ‚ç‚¹è¿è¡Œ JS/TS ä»£ç ï¼Œåƒå°å‹æ— æœåŠ¡å™¨å‡½æ•°ã€‚
	2. **Pages**ï¼šæ”¯æŒéƒ¨ç½²é™æ€ç½‘ç«™ï¼ˆç±»ä¼¼ Netlify/Vercelï¼‰ã€‚
	3. **R2 å­˜å‚¨**ï¼šå…¼å®¹ S3 çš„åˆ†å¸ƒå¼å¯¹è±¡å­˜å‚¨ã€‚
	4. **KV / D1**ï¼šè¾¹ç¼˜æ•°æ®åº“ã€‚
5. **é›¶ä¿¡ä»»ä¸ç½‘ç»œæœåŠ¡**
	1. **Cloudflare Access / Zero Trust**ï¼šé›¶ä¿¡ä»»å®‰å…¨æ¥å…¥ï¼ˆæ›¿ä»£ VPNï¼‰ã€‚
	2. **Cloudflare Tunnel**ï¼šä¸ç”¨æš´éœ²ç«¯å£ï¼Œä¹Ÿèƒ½æŠŠå†…ç½‘åº”ç”¨å®‰å…¨åœ°å‘å¸ƒåˆ°å…¬ç½‘ã€‚
	3. **DNS æœåŠ¡ï¼ˆ1.1.1.1ï¼‰**ï¼šå…¨çƒæœ€å¿«çš„å…¬å…± DNSï¼Œéšç§ä¿æŠ¤ã€‚

### åŸŸåæ³¨å†Œ

é¦–å…ˆæˆ‘ä»¬æ³¨å†Œè´¦å·ç™»å½•è¿›å…¥åå°ç‚¹å‡»åŸŸæ³¨å†Œ->æ³¨å†ŒåŸŸï¼š

![image-20250821104856379](https://image.hyly.net/i/2025/08/21/e3518273949a6eed735ad74bc19f8e70-0.webp)

ç”±äºcloudflareç»å¸¸æ”¹ç‰ˆï¼Œä½ å®é™…çœ‹çš„æ—¶å€™å¯èƒ½ä¸æ˜¯è¿™æ ·çš„ç•Œé¢ï¼Œä½†æ˜¯åŠŸèƒ½åå­—å·®ä¸å¤šï¼Œæ‘¸ç´¢ç€æ‰¾ä¸€ä¸‹å°±å¯ä»¥ã€‚æœç´¢åˆ°è‡ªå·±å¿ƒä»ªçš„åŸŸåç„¶åç‚¹å‡»æ³¨å†Œï¼Œåˆ°æ³¨å†Œä¿¡æ¯å¡«å†™é¡µé¢ï¼Œä»˜æ¬¾æ–¹å¼è¿™é‡Œå¯ä»¥é€‰Visaæˆ–é“¶è”å¡ï¼Œå»ºè®®å‹¾é€‰å¯ç”¨è‡ªåŠ¨ç»­è®¢ï¼Œè¿™æ ·å°±ä¸è‡³äºæ²¡æœ‰åŠæ—¶ç»­è´¹ä¸¢å¤±ä½¿ç”¨å¾ˆä¹…çš„åŸŸåï¼Œåšå®¢æ›´æ¢åŸŸåæ˜¯å¾ˆéº»çƒ¦çš„ä¸€ä»¶äº‹ï¼Œç›¸å½“äºæ‰åŠç®¡è¡€ã€‚

å¦‚æœé“¶è¡Œå¡ä»˜æ¬¾ä¸æˆåŠŸï¼Œä¹Ÿå¯ä»¥é€‰æ‹©PayPalæ”¯ä»˜ï¼Œåœ¨PayPalé‡Œé¢æ·»åŠ é“¶è¡Œå¡ï¼Œç„¶åå†ç”¨PayPalæ”¯ä»˜ï¼Œä»˜æ¬¾è¿™é‡Œå½“æ—¶è‡ªå·±å¼„äº†å¥½ä¹…ï¼Œç›´æ¥é“¶è¡Œå¡æ”¯ä»˜ä¸è¡Œç”¨PayPalä¹Ÿä¸è¡Œï¼Œåæ¥ä½¿ç”¨PayPalæ›´æ¢ç»‘å®šäº†å¥½å‡ å¼ å¡æ‰å¯ä»¥äº†ï¼Œä¿¡ç”¨å¡å’Œå‚¨è“„å¡éƒ½å°è¯•äº†ã€‚å¤§å®¶åœ¨è¿™é‡Œæ²¡æœ‰ä»˜æ¬¾æˆåŠŸä¹Ÿå»ºè®®å¤šå¼ å¡å°è¯•ä¸€ä¸‹ã€‚

![image-20250821105124339](https://image.hyly.net/i/2025/08/21/5dff9c9b8e638cabbff32ed1c835d979-0.webp)

æ³¨å†Œå®Œæˆåå°±ä¼šåœ¨åŸŸæ³¨å†Œ->ç®¡ç†åŸŸè¿™é‡Œçœ‹åˆ°æ³¨å†ŒæˆåŠŸçš„åŸŸåï¼Œç‚¹å‡»ç®¡ç†å°±å¯ä»¥é’ˆå¯¹åŸŸååšIPæ˜ å°„ç­‰ã€‚

![image-20250821110634433](https://image.hyly.net/i/2025/08/21/7ee5c748a2f0e483ba24b74c3af0df5f-0.webp)

![image-20250821110742390](https://image.hyly.net/i/2025/08/21/fedffa93a26332071fdb98649be5137e-0.webp)

### åŸºç¡€é…ç½®

![image-20250821151650820](https://image.hyly.net/i/2025/08/21/e304667bca2646af17eb25a62dc9c994-0.webp)

åœ¨æ¦‚è¿°è¿™é‡Œå¯ä»¥é…ç½®ä»¥ä¸‹å‡ ä¸ªé€‰é¡¹ï¼š

1. Under Attack æ¨¡å¼ï¼šå½“ç½‘ç«™å¤„äºè¢«æ”»å‡»çš„çŠ¶æ€æ—¶ï¼Œå¯ä»¥çŸ­æš‚å¼€å¯æ¥åŠ å¼ºç½‘ç«™çš„é˜²å¾¡ï¼Œä½†æ˜¯å¯èƒ½ä¼šé€ æˆç½‘ç«™æœ‰äº›ç”¨æˆ·æš‚æ—¶ä¸èƒ½è®¿é—®ã€‚ä½†è¿™å°±å¥½åƒæ˜¯äººå·²ç»é«˜çƒ§ä¸é€€äº†ï¼Œè¿™æ—¶å€™ä¹Ÿç®¡ä¸äº†é‚£ä¹ˆå¤šäº†ï¼Œåªèƒ½ä¸‹çŒ›è¯äº†ã€‚è¯¦ç»†çš„å¯ä»¥çœ‹åŠŸèƒ½ä¸‹æ–¹é“¾æ¥çš„è¯¦ç»†è¯´æ˜ï¼š

	![image-20250821152323228](https://image.hyly.net/i/2025/08/21/d1f125d1294f75779498269a9751e333-0.webp)

2. å¼€å‘æ¨¡å¼ï¼šå¼€å¯è¿™ä¸ªæ¨¡å¼çš„æ—¶å€™ä¼šæš‚æ—¶ç»•è¿‡ç¼“å­˜ï¼Œåœ¨ç½‘ç«™è°ƒè¯•é˜¶æ®µï¼Œè¿™ä¸ªåŠŸèƒ½éå¸¸å¥½ç”¨ï¼Œä½ ä¹Ÿä¸æƒ³æ”¹åŠ¨äº†ä¸€ä¸ªé…ç½®å‘ç°ä¸ç”Ÿæ•ˆï¼Œæ‰¾æ¥æ‰¾å»åŸæ¥æ˜¯ç¼“å­˜çš„åŸå› å§ã€‚

3. å§‹ç»ˆä½¿ç”¨ HTTPSã€è‡ªåŠ¨ HTTPS é‡å†™ï¼šè¿™ä¸¤ä¸ªè¦å¼€å¯ï¼Œè¿™æ ·è®¿é—®éƒ½æ˜¯HTTPSçš„è¯·æ±‚ï¼Œå¯ä»¥åŠ å¯†æ¯æ¬¡è¯·æ±‚çš„æ•°æ®ï¼Œä¸ä¼šæ³„éœ²è´¦å·å¯†ç æˆ–å…³é”®æ•°æ®å•¥çš„ã€‚

4. è‡ªåŠ¨ç¨‹åºæ”»å‡»æ¨¡å¼ï¼šç®€å•æ¥è¯´å°±æ˜¯å¸®ä½ è¯†åˆ«ä¸€éƒ¨åˆ†è‡ªåŠ¨ç¨‹åºçš„æµé‡è¿›è¡Œé˜²å¾¡ï¼Œè®©ä½ çš„ç½‘ç«™å°½é‡éƒ½æ˜¯çœŸäººæµé‡å»è®¿é—®ã€‚

![image-20250821154253423](https://image.hyly.net/i/2025/08/21/ea324d3a323f45ed5c5cf9d02ea76567-0.webp)

1. Always Onlineï¼šå°±æ˜¯ä¸ºä½ çš„ç½‘ç«™åˆ›å»ºå‰¯æœ¬ï¼Œç›¸å½“äºç¼“å­˜ï¼Œå½“ä½ çš„ç½‘ç«™å¤„äºä¸å¯ç”¨çŠ¶æ€æ—¶ï¼Œç”¨æˆ·ä¹Ÿèƒ½ä»ä½ çš„ç½‘ç«™å‰¯æœ¬ä¹Ÿå°±æ˜¯ç¼“å­˜é‡Œæ‰“å¼€ç½‘ç«™ï¼Œå°±å¥½åƒç½‘ç«™èƒ½æ­£å¸¸è®¿é—®ä¸€æ ·ã€‚
2. é€Ÿåº¦ä¼˜åŒ–ï¼šé€šè¿‡ç®—æ³•æå‰ä¸ºç”¨æˆ·è¿”å›ä¸‹ä¸€é¡µçš„å†…å®¹ï¼Œå†…å®¹é¢„å–ï¼Œå½“ä½ çœŸçš„å»ç‚¹å‡»ä¸‹ä¸€é¡µçš„æ—¶å€™çœ‹èµ·æ¥å°±è·Ÿç§’å¼€ä¸€æ ·ã€‚å¼€å¯è¿™ä¸ªä¼šé¢å¤–æ¶ˆè€—æœåŠ¡å™¨çš„æµé‡ï¼Œå› ä¸ºç”¨æˆ·ä¸‡ä¸€ä¸æ‰“å¼€ä¸‹ä¸€é¡µï¼Œä½†ä¸‹ä¸€é¡µå†…å®¹å·²ç»æå‰åŠ è½½å¥½äº†ï¼Œä¸è¿‡ç›¸å¯¹äºä½¿ç”¨ä½“éªŒï¼Œæµé‡æ¶ˆè€—æ— è¶³è½»é‡äº†ã€‚

### DNSé…ç½®

åœ¨DNS->è®°å½•é‚£é‡Œå¯ä»¥æ·»åŠ åŸŸåDNSè§£æï¼Œç±»å‹ä¸€èˆ¬é€‰æ‹©Aå°±è¡Œäº†ï¼Œåç§°é‚£é‡Œå¦‚æœæ˜¯ä¸»åŸŸåå°±å¡«@ï¼Œå¦‚æœæ˜¯æƒ³wwwæˆ–å­åŸŸåè§£æçš„å°±å¡«wwwæˆ–å­åŸŸååå­—ï¼Œç„¶åå¡«ä¸ŠIPã€‚å…¶ä»–çš„å¯ä»¥è¯¦ç»†çœ‹ä¸‹æç¤ºè¯´æ˜ï¼Œå¦‚æœå®åœ¨ä¸äº†è§£å„ä¸ªæ€ä¹ˆç”¨çš„å°ä¼™ä¼´å¯ä»¥GPTä¸‹ï¼Œä¹Ÿä¸ä¼šå¤ªéš¾ç†è§£ã€‚

> æœ‰é‚®ä»¶æœåŠ¡å™¨éœ€æ±‚çš„å°ä¼™ä¼´è¿™é‡Œä¹Ÿå¯ä»¥è®¾ç½®é‚®ä»¶äºŒçº§åŸŸåï¼Œä½†æˆ‘æ²¡ç”¨åˆ°ï¼Œè¿™é‡Œå°±ä¸è¯¦ç»†å†™äº†ï¼Œæœ‰éœ€è¦çš„å°ä¼™ä¼´å¯ä»¥çœ‹[è¿™ç¯‡æ–‡ç« ](https://blognas.hwb0307.com/skill/3278#header-id-11)ã€‚

ä»£ç†çŠ¶æ€é‚£ä¸ªæŒ‰é’®ä¸€å®šè¦**ç‚¹ä¸Šï¼ï¼ï¼**ï¼Œè¿™é‡Œå†å¹ä¸€æ³¢cloudflareï¼Œè¿™ä¸ªä»£ç†çŠ¶æ€æ˜¯å¼€å¯CDNåŠŸèƒ½ï¼Œä»–çš„ä½œç”¨å°±æ˜¯ç»™ä½ çš„ç½‘ç«™åšå…¨çƒåŠ é€Ÿï¼ŒåŸç†å°±æ˜¯ä»–ä¼šæŠŠä½ ç½‘ç«™é™æ€å†…å®¹ç¼“å­˜åˆ°å…¨çƒçš„å„ä¸ªèŠ‚ç‚¹ï¼Œå½“ç”¨æˆ·è®¿é—®ä½ ç½‘ç«™çš„æ—¶å€™ï¼Œä¼šä»å°±è¿‘èŠ‚ç‚¹è·å–æ–‡å­—ã€å›¾ç‰‡ç­‰å†…å®¹ï¼Œå°±ä¸ç”¨ç›´æ¥å»ä½ ç½‘ç«™æ‹¿å†…å®¹ï¼Œæé«˜äº†ç”¨æˆ·è®¿é—®é€Ÿåº¦ï¼Œè¿˜é™ä½äº†å¯¹ç½‘ç«™çš„æµé‡å‹åŠ›ã€‚è™½ç„¶ä»–å¯èƒ½å¯¹å¤§é™†å†…éƒ¨çš„è®¿é—®CDNåŠ é€Ÿä¸æ˜¯å¤ªå¥½ï¼Œä½†æ˜¯å…è´¹ç™½å«–ä¸€ä¸ªå…¨çƒCDNåŠ é€Ÿå¤šé¦™å•Šï¼ä½¿ç”¨CDNåœ¨å›½å†…äº‘å‚å•†å¯æ˜¯è¦æä¸å°‘é’±çš„å­˜åœ¨ã€‚CDNè¿˜æœ‰ä¸€ä¸ªå¥½å¤„å°±æ˜¯éšè—æœåŠ¡å™¨çš„çœŸå®IPï¼Œé»‘å®¢æ‰¾ä¸åˆ°ä½ æœåŠ¡å™¨çš„çœŸå®IPï¼Œä»–pingåŸŸåå¾—åˆ°çš„åªæ˜¯ä¸€ä¸ªCDNç¼“å­˜åœ°å€çš„IPï¼Œå³ä½¿ä»–å†å¯¹è¿™ä¸ªCDN IPåšDDOSæ”»å‡»ä¹Ÿæ˜¯æ²¡æœ‰ç”¨çš„ï¼Œä¸ä¼šå¯¹ä½ ç½‘ç«™é€ æˆå¤šå¤§å½±å“ï¼Œæå‡äº†ç½‘ç«™å®‰å…¨æ€§ã€‚

![image-20250821160350015](https://image.hyly.net/i/2025/08/21/c97dcb116830e4225f99c9cc2cc1390e-0.webp)

DNSè®¾ç½®é‡Œé¢è¿˜æœ‰ä¸€ä¸ªDNSSESè®¾ç½®ï¼Œå¤§å®¶ä¹Ÿå¯ä»¥å¯ç”¨äº†ï¼ŒåŠŸèƒ½è¯´æ˜å¦‚å›¾æ‰€ç¤ºï¼š

![image-20250821162246910](https://image.hyly.net/i/2025/08/21/6a88e3b1523e5ec61a3f3bb08b98f8bb-0.webp)

### SSL/TLS

å…³äºåŸŸåSSLè¯ä¹¦è¿™é‡Œå°±åˆè¦å†å¹ä¸€æ³¢cloudflareeäº†ï¼Œåœ¨å›½å†…å‚å•†ï¼ŒSSLè¯ä¹¦éƒ½æ˜¯åŠ¨è¾„**å¤©ä»·**çš„å­˜åœ¨ï¼Œå³ä½¿å›½å†…å‚å•†å…è´¹çš„è¯ä¹¦ä¹Ÿæ˜¯åªæœ‰ä¸€ä¸ªæœˆæˆ–ä¸‰ä¸ªæœˆçš„æœ‰æ•ˆæœŸï¼Œè¿˜é™åˆ¶ä½ ç”³è¯·æ¬¡æ•°ã€‚æ²¡æƒ³åˆ°äººå®¶cloudflareå…è´¹å°±è®©ç”¨æˆ·ä½¿ç”¨äº†ã€‚

é¦–å…ˆåœ¨SSL/TLSæ¦‚è¿°è¿™é‡Œå¯ç”¨åŠ å¯†æ¨¡å¼ä¸º**å®Œå…¨**

![image-20250821175643299](https://image.hyly.net/i/2025/08/21/e2d009ec2151f18b762642240ee1085a-0.webp)

å…¶æ¬¡ä½ å¯ä»¥åœ¨SSL/TLS->è¾¹ç¼˜è¯ä¹¦è¿™é‡Œ**å…è´¹**ç”³è¯·è¯ä¹¦ï¼Œè€Œä¸”è¯ä¹¦æ—¶é—´è¿˜å¾ˆé•¿ï¼å¹¶ä¸”ç›¸å…³è®¾ç½®å¦‚ä¸‹ï¼Œå¤§å®¶å‚ç…§ç€æ¥å°±å¯ä»¥äº†ï¼š

![image-20250821175919554](https://image.hyly.net/i/2025/08/21/82b5ed5a4d47cf1e5a518e8c48d863b6-0.webp)

ç„¶åå¤§å®¶å°±å¯ä»¥åœ¨æºæœåŠ¡å™¨è¿™é‡Œåˆ›å»ºè¯ä¹¦å¹¶ä¸‹è½½å®‰è£…åˆ°æœåŠ¡å™¨ä¸Šï¼Œè¿™æ ·è‡ªå·±åŸŸåå°±èƒ½å…è´¹ä½¿ç”¨httpsè®¿é—®äº†ï¼Œå¯¹å®‰å…¨æ€§æœ‰å¾ˆå¤§æå‡ï¼

![image-20250821180156188](https://image.hyly.net/i/2025/08/21/f44251daf1399adcf48640334e905110-0.webp)

#### SSLè¯ä¹¦å…·ä½“ä½¿ç”¨

é¦–å…ˆä¸Šä¼ åˆ°nginxç›®å½•ä¸‹ï¼Œç„¶åé…ç½®æ–‡ä»¶é‡Œå¼•å…¥å°±å¯ä»¥äº†ã€‚

åœ¨composeæ–‡ä»¶ä¸­nginxé…ç½®å¦‚ä¸‹ï¼š

```
#filename:docker-compose.yml 
nginx:
    image: bitnami/nginx:1.29.0
    container_name: nginx
    depends_on:
      - wordpress
    ports:
      - "80:8080"    # æ˜ å°„ä¸»æœº80ç«¯å£åˆ°nginxå®¹å™¨çš„8080ç«¯å£ï¼ˆbitnami/nginxé»˜è®¤ç›‘å¬8080ï¼‰
      - "443:8443"    # æ·»åŠ è¿™ä¸€è¡Œç”¨äº HTTPS
    volumes:
      - ./blog/nginx/conf:/opt/bitnami/nginx/conf/server_blocks:ro
      - ./blog/nginx/logs:/opt/bitnami/nginx/logs   # ğŸ‘ˆæ—¥å¿—æŒ‚è½½
      - ./blog/nginx/certs:/opt/bitnami/nginx/certs:ro   # æŒ‚è½½è¯ä¹¦ç›®å½•
    environment:
      - TZ=Asia/Shanghai
    restart: unless-stopped
    networks:
      - wpnetwork
    cap_add:
      - SYS_NICE
    security_opt:
      - seccomp:unconfined
```

é‡ç‚¹æ˜¯è¿™ä¸¤è¡Œç¬¬ä¸€ä¸ªæ˜¯æŠŠå¤–éƒ¨443ç«¯å£æ˜ å°„ç»™bitnami/nginxé»˜è®¤8443ç«¯å£ï¼Œç¬¬äºŒä¸ªæ˜¯åœ¨Ubuntuä¸Šåˆ›å»ºè¯ä¹¦ç›®å½•ï¼ŒæŠŠè¯ä¹¦ä¸Šä¼ åˆ°è¿™ä¸ªç›®å½•ç„¶åæ˜ å°„åˆ°å®¹å™¨å†…ç›®å½•ã€‚

![image-20250821180657727](https://image.hyly.net/i/2025/08/21/6575d6942e3656cc85be62b79399e45d-0.webp)

æ¥ä¸‹æ¥é…ç½®`wordpress.conf`æ–‡ä»¶ï¼Œé‡è¦çš„æ˜¯è¿™å‡ è¡Œï¼š

![image-20250821181635439](https://image.hyly.net/i/2025/08/21/0fd80e79dbda383f2695d76ca6c4251a-0.webp)

å®Œæ•´çš„é…ç½®æ–‡ä»¶å¦‚ä¸‹ï¼š

```
    # åšå®¢
    server {
        listen 8080;
        server_name hyly.net www.hyly.net;
        #ç›‘å¬8080ç«¯å£æŠŠéhttpsçš„è¯·æ±‚éƒ½ç»Ÿä¸€è·³è½¬ä¸ºhttps
        return 301 https://$host:8443$request_uri;

    }
    # åšå®¢443
    server {
        #ç›‘å¬httpsè¯·æ±‚
        listen 8443 ssl;
        server_name hyly.net www.hyly.net;

        # ä½ å¯ä»¥æ”¹æˆä½ æƒ³å…è®¸çš„æœ€å¤§ä¸Šä¼ å¤§å°
        client_max_body_size 100M;  
        # è¯ä¹¦å…¬é’¥è·¯å¾„
        ssl_certificate     /opt/bitnami/nginx/certs/hylynet.pem;
        # è¯ä¹¦ç§é’¥è·¯å¾„
        ssl_certificate_key /opt/bitnami/nginx/certs/hylynet.key;
        # é™å®šæœåŠ¡å™¨æ”¯æŒçš„ TLS åè®®ç‰ˆæœ¬ã€‚
        ssl_protocols       TLSv1.2 TLSv1.3;
        # é…ç½®æœåŠ¡å™¨å…è®¸ä½¿ç”¨çš„åŠ å¯†å¥—ä»¶
        ssl_ciphers         HIGH:!aNULL:!MD5;
    
        # è¯„è®ºé‚®ä»¶é€€è®¢é“¾æ¥è½¬å‘
        location ^~ /unsubscribe-comment-mailnotice {
            # ä½¿ç”¨ PHP-FPM å¤„ç†è¯·æ±‚
            fastcgi_pass wordpress:9000;  # PHP-FPM ç›‘å¬ 9000 ç«¯å£
            include fastcgi_params;
            fastcgi_param SCRIPT_FILENAME /bitnami/wordpress/wp-content/themes/argon/unsubscribe-comment-mailnotice.php;  # ä½¿ç”¨å®¹å™¨å†…çš„è·¯å¾„
            fastcgi_param DOCUMENT_ROOT /bitnami/wordpress;
        }

        #æ·»åŠ ads.txtè°·æ­Œå¹¿å‘Š
        location = /ads.txt {
            proxy_pass http://wordpress:8080;
            proxy_set_header Host $host;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            proxy_set_header X-Forwarded-Proto $scheme;

            rewrite ^/ads.txt$ /wp-content/uploads/ads.txt break;
        }

        
        location ~* \.(?:ico|css|js|gif|jpe?g|png|woff2?|ttf|svg|eot|otf|map)$ {
            proxy_pass http://wordpress:8080;
            proxy_set_header Host $host;
            proxy_set_header X-Real-IP $remote_addr;
            expires 7d;
            access_log off;
        }

        location / {
            proxy_pass http://wordpress:8080;
            proxy_set_header Host $host;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            proxy_set_header X-Forwarded-Proto $scheme;
            proxy_set_header X-Forwarded-Host $host;
    }
}
```

### ç¼“å­˜

cloudflareæä¾›äº†ä¸€å®šé‡çš„å…è´¹ç¼“å­˜ä¾›æˆ‘ä»¬ä½¿ç”¨ï¼Œä½†è¿™å·²ç»è¶³å¤Ÿäº†ï¼Œå…·ä½“é…ç½®å¦‚ä¸‹ï¼š

![image-20250821182238871](https://image.hyly.net/i/2025/08/21/1d6c20355c3f46a9705f9796892e5afd-0.webp)

![ ](https://image.hyly.net/i/2025/08/21/e2400218e9f02358df3a03a4b2d844bf-0.webp)

### workers

è¿˜æœ‰æ–¹æ³•å¯ä»¥é…ç½®workersç„¶åè½¬å‘è·¯ç”±åˆ©ç”¨cloudflareçš„ç¼“å­˜ç©ºé—´å¤§å¹…åº¦æå‡å…¨çƒè®¿é—®é€Ÿåº¦ï¼Œä½†æ˜¯æˆ‘å®é™…ä½¿ç”¨ä¸‹æ¥å˜å¾—æ›´æ…¢æˆ–è€…ç”šè‡³ä¸èƒ½ä½¿ç”¨ï¼Œè¿˜ä¸å¦‚cloudflareé»˜è®¤çš„è§„åˆ™ï¼Œç„¶åå†åŠ ä¸Š**W3 Total Cache**æ’ä»¶ï¼ŒåŸºæœ¬ä¸Šå›½å†…ç”¨æˆ·è®¿é—®éƒ¨ç½²åœ¨å›½å¤–çš„wordpressæ— å‹åŠ›äº†ã€‚æ„Ÿå…´è¶£çš„åŒå­¦å¯ä»¥çœ‹ä¸‹[è¿™ç¯‡æ–‡ç« ](https://blognas.hwb0307.com/linux/docker/1415)ã€‚

ä»¥ä¸ŠåŸºæœ¬ä¸Šæ˜¯cloudflareæˆ‘æ‰€ä½¿ç”¨åˆ°çš„æ‰€æœ‰é…ç½®äº†ï¼Œå…¶ä»–çš„ä¸€äº›æ²¡åˆ—ä¸¾å‡ºæ¥çš„ï¼Œè¦ä¹ˆä»˜è´¹ä½†ç°åœ¨æš‚æ—¶ç”¨ä¸åˆ°çš„åŠŸèƒ½ï¼Œè¦ä¹ˆæ˜¯ä¸€äº›ç»Ÿè®¡åˆ†æï¼Œå¤§å®¶å¯ä»¥ç™»å½•ä¸Šå»éšä¾¿ç‚¹ç‚¹çœ‹å°±çŸ¥é“æ€ä¹ˆå›äº‹äº†ã€‚

## å°ç»“

ç›¸ä¿¡å¤§å®¶ç»è¿‡è¿™ä¹ˆä¸€ç•ªé…ç½®ï¼Œç½‘ç«™çš„å®‰å…¨æ€§èƒ½æå‡ä¸€å¤§æˆªï¼ä»¥åé‡åˆ°æ›´å¥½çš„æ–¹æ¡ˆæˆ‘ä¹Ÿä¼šç»§ç»­ç»™å¤§å®¶æ·»åŠ è¿›æ¥åˆ†äº«~

åœ¨ä½¿ç”¨å®‰è£…é…ç½®è¿‡ç¨‹ä¸­æœ‰ç–‘é—®çš„å°ä¼™ä¼´å¯ä»¥åœ¨æ–‡ç« ä¸‹æ–¹ç•™è¨€ä¸æˆ‘äº’åŠ¨ï¼Œæœ‰æœ€æ–°çš„èµ„æ–™æˆ‘ä¹Ÿä¼šåŠæ—¶æ›´æ–°æœ¬æ–‡ç« ï¼Œæ„Ÿå…´è¶£çš„å°ä¼™ä¼´è¯·å…³æ³¨ç‚¹èµå“ˆ~
